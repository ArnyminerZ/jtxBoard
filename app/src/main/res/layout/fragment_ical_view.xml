<?xml version="1.0" encoding="utf-8"?>

<!--
  ~ Copyright (c) Techbee e.U.
  ~ All rights reserved. This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0
  ~ which accompanies this distribution, and is available at
  ~ http://www.gnu.org/licenses/gpl.html
  -->

<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">


    <data>

        <import type="android.view.View" />
        <import type="at.techbee.jtx.util.DateTimeUtils" />

        <variable
            name="model"
            type="at.techbee.jtx.ui.IcalViewViewModel" />
    </data>


    <androidx.coordinatorlayout.widget.CoordinatorLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <androidx.core.widget.NestedScrollView
            android:layout_width="match_parent"
            android:layout_height="match_parent">

            <androidx.constraintlayout.widget.ConstraintLayout
                android:id="@+id/view_item_view"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                tools:context=".ui.IcalViewFragment">

                <com.google.android.material.progressindicator.LinearProgressIndicator
                    android:id="@+id/view_progress_indicator"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:indeterminate="true"
                    android:visibility="@{model.progressIndicatorVisible ? View.VISIBLE : View.GONE}"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent" />

                <com.google.android.material.progressindicator.LinearProgressIndicator
                    android:id="@+id/view_sync_progress_indicator"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:indeterminate="true"
                    android:visibility="@{model.showSyncProgressIndicator ? View.VISIBLE : View.GONE}"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent" />


                <ImageView
                    android:id="@+id/view_colorbar_collection"
                    android:layout_width="60dp"
                    android:layout_height="60dp"
                    android:alpha="0.5"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    app:srcCompat="@drawable/ic_card_colored_edge"
                    tools:ignore="ContentDescription"
                    tools:tint="#BC0D0D" />

                <ImageView
                    android:id="@+id/view_colorbar_collection_item"
                    android:layout_width="30dp"
                    android:layout_height="30dp"
                    android:alpha="0.5"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    app:srcCompat="@drawable/ic_card_colored_edge"
                    tools:ignore="ContentDescription"
                    tools:tint="#B6030D" />

                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_collection"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="8dp"
                    android:layout_marginTop="8dp"
                    android:layout_marginEnd="8dp"
                    android:drawablePadding="4dp"
                    android:text="@{model.collectionText}"
                    app:drawableStartCompat="@drawable/ic_collection"
                    app:layout_constraintEnd_toStartOf="@+id/view_upload_pending"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    tools:text="Collection" />


                <ImageView
                    android:id="@+id/view_upload_pending"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="8dp"
                    android:layout_marginEnd="8dp"
                    app:layout_constraintEnd_toStartOf="@id/view_readyonly"
                    app:layout_constraintTop_toTopOf="parent"
                    app:srcCompat="@drawable/ic_upload_pending"
                    android:visibility="@{model.uploadPendingVisible ? View.VISIBLE : View.GONE}"
                    tools:visibility="visible"
                    android:contentDescription="@string/upload_pending"/>


                <ImageView
                    android:id="@+id/view_readyonly"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="8dp"
                    android:layout_marginEnd="8dp"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    app:srcCompat="@drawable/ic_readonly"
                    android:visibility="gone"
                    tools:visibility="visible"
                    android:contentDescription="@string/readyonly"/>


                <com.google.android.material.card.MaterialCardView
                    android:id="@+id/view_dtstart_card"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="8dp"
                    android:visibility="@{model.dateVisible ? View.VISIBLE : View.GONE}"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/view_collection"
                    app:layout_constraintBottom_toTopOf="@id/view_barrier_above_summary"
                    app:layout_constraintVertical_bias="0.0"
                    >


                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:orientation="vertical"
                        android:paddingStart="4dp"
                        android:paddingEnd="4dp"
                        android:paddingBottom="8dp">

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/view_journal_dtstart_day"
                            android:layout_width="80dp"
                            android:layout_height="wrap_content"
                            android:text="@{DateTimeUtils.INSTANCE.convertLongToDayString(model.icalEntity.property.dtstart, model.icalEntity.property.dtstartTimezone)}"
                            android:textAlignment="center"
                            android:textSize="36sp"
                            android:textStyle="bold"
                            tools:text="31" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/view_journal_dtstart_month"
                            android:layout_width="80dp"
                            android:layout_height="wrap_content"
                            android:text="@{DateTimeUtils.INSTANCE.convertLongToMonthString(model.icalEntity.property.dtstart, model.icalEntity.property.dtstartTimezone)}"
                            android:textAlignment="center"
                            android:textSize="12sp"
                            android:textStyle="bold"
                            tools:text="December" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/view_journal_dtstart_year"
                            android:layout_width="80dp"
                            android:layout_height="wrap_content"
                            android:text="@{DateTimeUtils.INSTANCE.convertLongToYearString(model.icalEntity.property.dtstart, model.icalEntity.property.dtstartTimezone)}"
                            android:textAlignment="center"
                            android:textSize="12sp"
                            android:textStyle="bold"
                            tools:text="2020" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/view_journal_dtstart_time"
                            android:layout_width="80dp"
                            android:layout_height="wrap_content"
                            android:text="@{DateTimeUtils.INSTANCE.convertLongToTimeString(model.icalEntity.property.dtstart, model.icalEntity.property.dtstartTimezone)}"
                            android:textAlignment="center"
                            android:textSize="18sp"
                            android:textStyle="bold"
                            android:visibility="@{model.timeVisible ? View.VISIBLE : View.GONE}"
                            tools:text="13:30" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/view_journal_dtstart_timezone_offset"
                            android:layout_width="80dp"
                            android:layout_height="wrap_content"
                            android:text="@{DateTimeUtils.INSTANCE.getOffsetStringFromTimezone(model.icalEntity.property.dtstartTimezone)}"
                            android:textAlignment="center"
                            android:textSize="12sp"
                            android:textStyle="bold"
                            android:visibility="@{model.timezoneVisible ? View.VISIBLE : View.GONE}"
                            tools:text="GMT+1" />

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/view_journal_dtstart_timezone_name"
                            android:layout_width="80dp"
                            android:layout_height="wrap_content"
                            android:text="@{model.icalEntity.property.dtstartTimezone}"
                            android:textAlignment="center"
                            android:textSize="12sp"
                            android:visibility="@{model.timezoneVisible ? View.VISIBLE : View.GONE}"
                            tools:text="Europe/Vienna" />
                    </LinearLayout>

                </com.google.android.material.card.MaterialCardView>



                <com.google.android.material.chip.ChipGroup
                    android:id="@+id/view_categories_chipgroup"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="8dp"
                    android:layout_marginTop="8dp"
                    android:layout_marginEnd="8dp"
                    app:chipSpacingHorizontal="8dp"
                    app:chipSpacingVertical="0dp"
                    app:layout_constraintBottom_toTopOf="@id/view_barrier_above_summary"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toEndOf="@+id/view_dtstart_card"
                    app:layout_constraintTop_toTopOf="@id/view_dtstart_card"
                    app:layout_constraintVertical_bias="0.0" />


                <androidx.constraintlayout.widget.Barrier
                    android:id="@+id/view_barrier_above_summary"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    app:barrierDirection="bottom"
                    app:constraint_referenced_ids="view_categories_chipgroup,view_dtstart_card,view_collection"
                    tools:layout_editor_absoluteY="192dp" />


                <com.google.android.material.card.MaterialCardView
                    android:id="@+id/view_card_view"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_margin="8dp"
                    android:checkable="false"
                    android:clickable="false"
                    android:focusable="false"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/view_barrier_above_summary">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical">

                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/view_summary"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="8dp"
                            android:paddingStart="8dp"
                            android:paddingEnd="8dp"
                            android:text="@{model.icalEntity.property.summary}"
                            android:textSize="18sp"
                            android:textStyle="bold"
                            android:textIsSelectable="true"
                            tools:text="Summary ... Lorem ipsum dolor sit amet" />


                        <com.google.android.material.textview.MaterialTextView
                            android:id="@+id/view_description"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="8dp"
                            android:autoLink="all"
                            android:ems="10"
                            android:paddingStart="8dp"
                            android:paddingEnd="8dp"
                            android:paddingBottom="8dp"
                            android:textIsSelectable="true"
                            tools:text="Description ... Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet." />
                    </LinearLayout>
                </com.google.android.material.card.MaterialCardView>



                <androidx.constraintlayout.widget.Barrier
                    android:id="@+id/view_barrier_taskdates_bottom"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    app:barrierDirection="bottom"
                    app:constraint_referenced_ids="view_card_view"  />



                <LinearLayout
                    android:id="@+id/view_adContainer"
                    android:orientation="vertical"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="8dp"
                    android:visibility="gone"
                    tools:visibility="visible"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/view_barrier_taskdates_bottom" />



                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_location_header"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="8dp"
                    android:layout_marginTop="8dp"
                    android:drawablePadding="8dp"
                    android:text="@string/location"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:visibility="@{model.locationHeaderVisible ? View.VISIBLE : View.GONE}"
                    app:drawableStartCompat="@drawable/ic_location"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/view_adContainer" />

                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_location"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="32dp"
                    android:layout_marginTop="8dp"
                    android:autoLink="all"
                    android:text="@{model.icalEntity.property.location}"
                    android:visibility="@{model.locationVisible ? View.VISIBLE : View.GONE}"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="@+id/view_location_header"
                    app:layout_constraintTop_toBottomOf="@+id/view_location_header"
                    tools:text="Office 1020 Vienna" />

                <LinearLayout
                    android:id="@+id/view_location_map"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="16dp"
                    android:orientation="vertical"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/view_location"
                    />


                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_recurrence_header"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="8dp"
                    android:layout_marginTop="16dp"
                    android:drawablePadding="8dp"
                    android:text="@string/recurrence"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:visibility="@{model.recurrenceVisible ? View.VISIBLE : View.GONE}"
                    app:drawableStartCompat="@drawable/ic_recurring"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/view_location_map" />

                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_recurrence_items"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="32dp"
                    android:layout_marginTop="8dp"
                    android:autoLink="all"
                    android:visibility="@{model.recurrenceItemsVisible ? View.VISIBLE : View.GONE}"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="@+id/view_recurrence_header"
                    app:layout_constraintTop_toBottomOf="@+id/view_recurrence_header"
                    tools:text="Friday, September 24, 2021 1:34 PM\nSaturday, September 25, 2021 1:34 PM\nSunday, September 26, 2021 1:34 PM"
                    />


                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_recurrence_exception_header"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="32dp"
                    android:layout_marginTop="16dp"
                    android:autoLink="all"
                    android:textStyle="bold|italic"
                    android:visibility="@{model.recurrenceExceptionsVisible ? View.VISIBLE : View.GONE}"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="@+id/view_recurrence_header"
                    app:layout_constraintTop_toBottomOf="@+id/view_recurrence_items"
                    android:text="@string/recurrence_exceptions" />

                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_recurrence_exception_items"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="32dp"
                    android:layout_marginTop="8dp"
                    android:autoLink="all"
                    android:visibility="@{model.recurrenceExceptionsVisible ? View.VISIBLE : View.GONE}"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="@+id/view_recurrence_header"
                    app:layout_constraintTop_toBottomOf="@+id/view_recurrence_exception_header"
                    tools:text="Friday, September 24, 2021 1:34 PM\nSaturday, September 25, 2021 1:34 PM\nSunday, September 26, 2021 1:34 PM"
                    />

                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_recurrence_additions_header"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="32dp"
                    android:layout_marginTop="16dp"
                    android:autoLink="all"
                    android:textStyle="bold|italic"
                    android:visibility="@{model.recurrenceAdditionsVisible ? View.VISIBLE : View.GONE}"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="@+id/view_recurrence_header"
                    app:layout_constraintTop_toBottomOf="@+id/view_recurrence_exception_items"
                    android:text="@string/recurrence_additions" />


                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_recurrence_additions_items"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="32dp"
                    android:layout_marginTop="8dp"
                    android:autoLink="all"
                    android:visibility="@{model.recurrenceAdditionsVisible ? View.VISIBLE : View.GONE}"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="@+id/view_recurrence_header"
                    app:layout_constraintTop_toBottomOf="@+id/view_recurrence_additions_header"
                    tools:text="Friday, September 24, 2021 1:34 PM\nSaturday, September 25, 2021 1:34 PM\nSunday, September 26, 2021 1:34 PM"
                    />



                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_recurrence_note_to_original"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="32dp"
                    android:layout_marginTop="8dp"
                    android:layout_marginEnd="8dp"
                    android:autoLink="all"
                    android:visibility="@{model.recurrenceLinkedVisible ? View.VISIBLE : View.GONE}"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="@+id/view_recurrence_header"
                    app:layout_constraintTop_toBottomOf="@+id/view_recurrence_additions_items"
                    android:text="@string/view_recurrence_note_to_original" />

                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_recurrence_note_is_exception"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="32dp"
                    android:layout_marginEnd="8dp"
                    android:layout_marginTop="8dp"
                    android:autoLink="all"
                    android:visibility="@{model.recurrenceIsExceptionVisible ? View.VISIBLE : View.GONE}"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="@+id/view_recurrence_header"
                    app:layout_constraintTop_toBottomOf="@+id/view_recurrence_note_to_original"
                    android:text="@string/view_reccurrence_note_is_exception" />


                <com.google.android.material.button.MaterialButton
                    android:id="@+id/view_recurrence_gotooriginal_button"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="8dp"
                    android:text="@string/view_recurrence_go_to_original_button"
                    android:visibility="@{model.recurrenceGoToOriginalVisible ? View.VISIBLE : View.GONE}"
                    app:icon="@drawable/ic_recurring"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/view_recurrence_note_is_exception" />


                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_relatedto_header"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="8dp"
                    android:layout_marginTop="16dp"
                    android:drawablePadding="8dp"
                    android:text="@string/relatedto"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:visibility="@{model.relatedtoVisible ? View.VISIBLE : View.GONE}"
                    app:drawableStartCompat="@drawable/ic_link"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@+id/view_recurrence_gotooriginal_button" />

                <com.google.android.material.textview.MaterialTextView
                    android:id="@+id/view_relatedto"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="32dp"
                    android:layout_marginTop="8dp"
                    android:autoLink="all"
                    android:visibility="@{model.relatedtoVisible ? View.VISIBLE : View.GONE}"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="@+id/view_relatedto_header"
                    app:layout_constraintTop_toBottomOf="@+id/view_relatedto_header"
                    tools:text="https://example.com/remote.php/dav/calendars/johndoe/personal/097E4865-D073-4279-806C-3E2B3250C947.ics" />


            </androidx.constraintlayout.widget.ConstraintLayout>
        </androidx.core.widget.NestedScrollView>
    </androidx.coordinatorlayout.widget.CoordinatorLayout>


</layout>